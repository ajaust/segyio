cmake_minimum_required(VERSION 3.15)
project(segyio-python-extension LANGUAGES C CXX)

set(CMAKE_CXX_STANDARD 11)

find_package(Python COMPONENTS Interpreter Development.Module REQUIRED)
find_package(segyio REQUIRED)

python_add_library(_segyio MODULE WITH_SOABI segyio/segyio.cpp)
target_link_libraries(_segyio PRIVATE segyio::segyio)

if (MSVC)
    target_compile_options(_segyio
        BEFORE
        PRIVATE
            /EHsc
    )
endif ()

install(TARGETS _segyio LIBRARY DESTINATION segyio)
